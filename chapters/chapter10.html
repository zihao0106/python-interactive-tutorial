<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬10ç« ï¼šæ­£åˆ™è¡¨è¾¾å¼ - Pythonäº¤äº’å¼æ•™ç¨‹</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="../index.html">ğŸ Pythonäº¤äº’å¼æ•™ç¨‹</a>
            <div class="navbar-nav ms-auto">
                <span class="nav-link text-light">
                    <span id="python-status">â³ Pythonç¯å¢ƒåŠ è½½ä¸­...</span>
                </span>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-3">
                <!-- ç›®å½•ä¾§è¾¹æ  -->
                <div class="sticky-top" style="top: 1rem;">
                    <div class="card">
                        <div class="card-header">
                            <h6>ğŸ“š è¯¾ç¨‹ç›®å½•</h6>
                        </div>
                        <div class="card-body p-2">
                            <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="chapter1.html">ç¬¬1ç« ï¼šPythonåŸºç¡€</a>
                                <a class="nav-link" href="chapter2.html">ç¬¬2ç« ï¼šå˜é‡ä¸æ•°æ®ç±»å‹</a>
                                <a class="nav-link" href="chapter3.html">ç¬¬3ç« ï¼šè¿ç®—ç¬¦ä¸è¡¨è¾¾å¼</a>
                                <a class="nav-link" href="chapter4.html">ç¬¬4ç« ï¼šæ§åˆ¶ç»“æ„</a>
                                <a class="nav-link" href="chapter5.html">ç¬¬5ç« ï¼šåˆ—è¡¨ä¸å…ƒç»„</a>
                                <a class="nav-link" href="chapter6.html">ç¬¬6ç« ï¼šå­—å…¸ä¸é›†åˆ</a>
                                <a class="nav-link" href="chapter7.html">ç¬¬7ç« ï¼šå‡½æ•°</a>
                                <a class="nav-link" href="chapter8.html">ç¬¬8ç« ï¼šæ¨¡å—ä¸åŒ…</a>
                                <a class="nav-link" href="chapter9.html">ç¬¬9ç« ï¼šå­—ç¬¦ä¸²å¤„ç†</a>
                                <a class="nav-link active" href="chapter10.html">ç¬¬10ç« ï¼šæ­£åˆ™è¡¨è¾¾å¼</a>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <main>
                    <!-- ç« èŠ‚æ ‡é¢˜ -->
                    <div class="chapter-header">
                        <h1>ğŸ” ç¬¬10ç« ï¼šæ­£åˆ™è¡¨è¾¾å¼</h1>
                        <p class="lead">å­¦ä¹ å¼ºå¤§çš„æ–‡æœ¬æ¨¡å¼åŒ¹é…å·¥å…·ï¼Œè®©æ–‡æœ¬å¤„ç†å˜å¾—æ›´åŠ é«˜æ•ˆå’Œçµæ´»ã€‚</p>
                    </div>

                    <!-- å­¦ä¹ ç›®æ ‡ -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>ğŸ¯ å­¦ä¹ ç›®æ ‡</h5>
                        </div>
                        <div class="card-body">
                            <ul>
                                <li>ç†è§£æ­£åˆ™è¡¨è¾¾å¼çš„æ¦‚å¿µå’Œç”¨é€”</li>
                                <li>æŒæ¡æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•</li>
                                <li>å­¦ä¼šä½¿ç”¨Pythonçš„reæ¨¡å—</li>
                                <li>ç†Ÿç»ƒä½¿ç”¨é‡è¯ã€å­—ç¬¦ç±»å’Œåˆ†ç»„</li>
                                <li>èƒ½å¤Ÿç¼–å†™å®ç”¨çš„æ–‡æœ¬å¤„ç†ç¨‹åº</li>
                            </ul>
                        </div>
                    </div>

                    <!-- çŸ¥è¯†ç‚¹1ï¼šæ­£åˆ™è¡¨è¾¾å¼åŸºç¡€ -->
                    <section class="mb-4">
                        <h3>ğŸ“– ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿ</h3>
                        <p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼Œç®€ç§°regexæˆ–regexpï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æ¨¡å¼åŒ¹é…å·¥å…·ï¼Œç”¨äºæè¿°ã€åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚</p>
                        
                        <div class="alert alert-info">
                            <h6>æ­£åˆ™è¡¨è¾¾å¼çš„ä¸»è¦ç”¨é€”ï¼š</h6>
                            <ul class="mb-0">
                                <li><strong>éªŒè¯</strong>ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆç‰¹å®šæ ¼å¼ï¼ˆå¦‚é‚®ç®±ã€æ‰‹æœºå·ï¼‰</li>
                                <li><strong>æŸ¥æ‰¾</strong>ï¼šåœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾ç¬¦åˆæ¨¡å¼çš„å†…å®¹</li>
                                <li><strong>æ›¿æ¢</strong>ï¼šå°†ç¬¦åˆæ¨¡å¼çš„å†…å®¹æ›¿æ¢ä¸ºå…¶ä»–å†…å®¹</li>
                                <li><strong>æå–</strong>ï¼šä»æ–‡æœ¬ä¸­æå–ç‰¹å®šä¿¡æ¯</li>
                            </ul>
                        </div>

                        <div class="code-example">
                            <div class="code-header">
                                <span>ğŸ’» æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€ç¤ºä¾‹</span>
                                <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                            </div>
                            <pre><code class="language-python">import re

# åŸºæœ¬åŒ¹é…
text = "æˆ‘çš„ç”µè¯æ˜¯13812345678"
pattern = r"138\d{8}"  # åŒ¹é…ä»¥138å¼€å¤´çš„11ä½æ‰‹æœºå·

# ä½¿ç”¨search()æŸ¥æ‰¾
match = re.search(pattern, text)
if match:
    print("æ‰¾åˆ°æ‰‹æœºå·:", match.group())
else:
    print("æœªæ‰¾åˆ°åŒ¹é…")

# ä½¿ç”¨findall()æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…
text2 = "è”ç³»æ–¹å¼ï¼š13812345678 æˆ– 15987654321"
pattern2 = r"1[3-9]\d{9}"  # åŒ¹é…æ‰‹æœºå·çš„æ›´é€šç”¨æ¨¡å¼
matches = re.findall(pattern2, text2)
print("æ‰€æœ‰æ‰‹æœºå·:", matches)

# åŸºæœ¬æ¨¡å¼ç¤ºä¾‹
examples = [
    ("hello", "hello world"),          # ç®€å•åŒ¹é…
    (r"\d+", "å¹´é¾„25å²"),              # åŒ¹é…æ•°å­—
    (r"[a-z]+", "Hello World"),        # åŒ¹é…å°å†™å­—æ¯
    (r"Python|Java", "æˆ‘å­¦Python"),     # æˆ–æ“ä½œ
]

print("\nåŸºæœ¬æ¨¡å¼åŒ¹é…:")
for pattern, text in examples:
    match = re.search(pattern, text)
    result = match.group() if match else "æ— åŒ¹é…"
    print(f"æ¨¡å¼: {pattern:12} æ–‡æœ¬: {text:15} ç»“æœ: {result}")</code></pre>
                        </div>
                    </section>

                    <!-- çŸ¥è¯†ç‚¹2ï¼šåŸºæœ¬è¯­æ³•å’Œå…ƒå­—ç¬¦ -->
                    <section class="mb-4">
                        <h3>ğŸ”¤ åŸºæœ¬è¯­æ³•å’Œå…ƒå­—ç¬¦</h3>
                        <p>æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦æ¥è¡¨ç¤ºä¸åŒçš„åŒ¹é…æ¨¡å¼ã€‚</p>
                        
                        <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <thead>
                                    <tr>
                                        <th>å…ƒå­—ç¬¦</th>
                                        <th>å«ä¹‰</th>
                                        <th>ç¤ºä¾‹</th>
                                        <th>åŒ¹é…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>.</td><td>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td><td>a.c</td><td>abc, a1c, a@c</td></tr>
                                    <tr><td>^</td><td>åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´</td><td>^hello</td><td>hello world</td></tr>
                                    <tr><td>$</td><td>åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾</td><td>world$</td><td>hello world</td></tr>
                                    <tr><td>*</td><td>å‰é¢å­—ç¬¦é‡å¤0æ¬¡æˆ–å¤šæ¬¡</td><td>ab*</td><td>a, ab, abb</td></tr>
                                    <tr><td>+</td><td>å‰é¢å­—ç¬¦é‡å¤1æ¬¡æˆ–å¤šæ¬¡</td><td>ab+</td><td>ab, abb</td></tr>
                                    <tr><td>?</td><td>å‰é¢å­—ç¬¦é‡å¤0æ¬¡æˆ–1æ¬¡</td><td>ab?</td><td>a, ab</td></tr>
                                    <tr><td>\d</td><td>åŒ¹é…æ•°å­—</td><td>\d+</td><td>123, 456</td></tr>
                                    <tr><td>\w</td><td>åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿</td><td>\w+</td><td>hello, test_1</td></tr>
                                    <tr><td>\s</td><td>åŒ¹é…ç©ºç™½å­—ç¬¦</td><td>\s+</td><td>ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-example">
                            <div class="code-header">
                                <span>ğŸ’» å…ƒå­—ç¬¦ç¤ºä¾‹</span>
                                <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                            </div>
                            <pre><code class="language-python">import re

# æµ‹è¯•å„ç§å…ƒå­—ç¬¦
test_cases = [
    # (æ¨¡å¼, æµ‹è¯•æ–‡æœ¬, è¯´æ˜)
    (r".", "abc", "ç‚¹å·åŒ¹é…ä»»æ„å­—ç¬¦"),
    (r"a.c", "abc a1c a@c", "ç‚¹å·åœ¨ä¸­é—´"),
    (r"^hello", "hello world", "å¼€å¤´åŒ¹é…"),
    (r"world$", "hello world", "ç»“å°¾åŒ¹é…"),
    (r"\d+", "å¹´é¾„25å²ï¼Œèº«é«˜180cm", "åŒ¹é…æ•°å­—"),
    (r"\w+", "hello_world 123", "åŒ¹é…å•è¯å­—ç¬¦"),
    (r"\s+", "hello    world", "åŒ¹é…ç©ºç™½"),
    (r"ab*", "a ab abb abbb", "* é‡è¯"),
    (r"ab+", "a ab abb abbb", "+ é‡è¯"),
    (r"ab?", "a ab abb", "? é‡è¯"),
]

print("å…ƒå­—ç¬¦æµ‹è¯•:")
for pattern, text, description in test_cases:
    matches = re.findall(pattern, text)
    print(f"{description:15} æ¨¡å¼: {pattern:8} â†’ {matches}")

print("\nå­—ç¬¦ç±»ç¤ºä¾‹:")
# å­—ç¬¦ç±» []
character_classes = [
    (r"[abc]", "abcdef", "åŒ¹é…aã€bæˆ–c"),
    (r"[a-z]", "Hello World", "åŒ¹é…å°å†™å­—æ¯"),
    (r"[A-Z]", "Hello World", "åŒ¹é…å¤§å†™å­—æ¯"),
    (r"[0-9]", "abc123def", "åŒ¹é…æ•°å­—"),
    (r"[^0-9]", "abc123def", "åŒ¹é…éæ•°å­—"),
    (r"[a-zA-Z0-9]", "Hello@123", "åŒ¹é…å­—æ¯æ•°å­—"),
]

for pattern, text, description in character_classes:
    matches = re.findall(pattern, text)
    print(f"{description:15} æ¨¡å¼: {pattern:12} â†’ {matches}")</code></pre>
                        </div>
                    </section>

                    <!-- çŸ¥è¯†ç‚¹3ï¼šé‡è¯å’Œåˆ†ç»„ -->
                    <section class="mb-4">
                        <h3>ğŸ”¢ é‡è¯å’Œåˆ†ç»„</h3>
                        <p>é‡è¯ç”¨äºæŒ‡å®šåŒ¹é…çš„æ¬¡æ•°ï¼Œåˆ†ç»„ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä½œä¸ºä¸€ä¸ªæ•´ä½“ã€‚</p>
                        
                        <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <thead>
                                    <tr>
                                        <th>é‡è¯</th>
                                        <th>å«ä¹‰</th>
                                        <th>ç¤ºä¾‹</th>
                                        <th>åŒ¹é…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>{n}</td><td>é‡å¤næ¬¡</td><td>a{3}</td><td>aaa</td></tr>
                                    <tr><td>{n,}</td><td>é‡å¤næ¬¡æˆ–æ›´å¤š</td><td>a{2,}</td><td>aa, aaa, aaaa</td></tr>
                                    <tr><td>{n,m}</td><td>é‡å¤nåˆ°mæ¬¡</td><td>a{2,4}</td><td>aa, aaa, aaaa</td></tr>
                                    <tr><td>()</td><td>åˆ†ç»„</td><td>(ab)+</td><td>ab, abab</td></tr>
                                    <tr><td>|</td><td>æˆ–æ“ä½œ</td><td>cat|dog</td><td>catæˆ–dog</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-example">
                            <div class="code-header">
                                <span>ğŸ’» é‡è¯å’Œåˆ†ç»„ç¤ºä¾‹</span>
                                <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                            </div>
                            <pre><code class="language-python">import re

print("=== é‡è¯ç¤ºä¾‹ ===")
text = "a aa aaa aaaa aaaaa"

# ä¸åŒé‡è¯çš„æ•ˆæœ
quantifiers = [
    (r"a", "å•ä¸ªa"),
    (r"a{3}", "æ°å¥½3ä¸ªa"),
    (r"a{2,}", "2ä¸ªæˆ–æ›´å¤ša"),
    (r"a{2,4}", "2åˆ°4ä¸ªa"),
    (r"a+", "1ä¸ªæˆ–æ›´å¤ša"),
    (r"a*", "0ä¸ªæˆ–æ›´å¤ša"),
    (r"a?", "0ä¸ªæˆ–1ä¸ªa"),
]

for pattern, description in quantifiers:
    matches = re.findall(pattern, text)
    print(f"{description:12} {pattern:8} â†’ {matches}")

print("\n=== åˆ†ç»„ç¤ºä¾‹ ===")
# åˆ†ç»„çš„ä½¿ç”¨
group_examples = [
    (r"(ab)+", "ab abab ababab", "abé‡å¤"),
    (r"(hello|hi) world", "hello world hi world", "é€‰æ‹©åŒ¹é…"),
    (r"(\d{4})-(\d{2})-(\d{2})", "2024-03-15", "æ—¥æœŸåˆ†ç»„"),
    (r"([a-zA-Z]+)@([a-zA-Z]+)\.([a-zA-Z]+)", "user@example.com", "é‚®ç®±åˆ†ç»„"),
]

for pattern, text, description in group_examples:
    matches = re.findall(pattern, text)
    print(f"{description:10} â†’ {matches}")

print("\n=== æ•è·ç»„è¯¦ç»†ç¤ºä¾‹ ===")
# è¯¦ç»†çš„åˆ†ç»„æ•è·
date_text = "ä»Šå¤©æ˜¯2024-03-15ï¼Œæ˜å¤©æ˜¯2024-03-16"
date_pattern = r"(\d{4})-(\d{2})-(\d{2})"

# findallè¿”å›å…ƒç»„åˆ—è¡¨
dates = re.findall(date_pattern, date_text)
print("æ‰€æœ‰æ—¥æœŸ:", dates)

# searchè¿”å›åŒ¹é…å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®å„ä¸ªåˆ†ç»„
match = re.search(date_pattern, date_text)
if match:
    print("å®Œæ•´åŒ¹é…:", match.group(0))  # æˆ– match.group()
    print("å¹´ä»½:", match.group(1))
    print("æœˆä»½:", match.group(2))
    print("æ—¥æœŸ:", match.group(3))

# å‘½ååˆ†ç»„
named_pattern = r"(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})"
named_match = re.search(named_pattern, date_text)
if named_match:
    print("å‘½ååˆ†ç»„:")
    print("å¹´ä»½:", named_match.group('year'))
    print("æœˆä»½:", named_match.group('month'))
    print("æ—¥æœŸ:", named_match.group('day'))</code></pre>
                        </div>
                    </section>

                    <!-- çŸ¥è¯†ç‚¹4ï¼šreæ¨¡å—çš„ä¸»è¦å‡½æ•° -->
                    <section class="mb-4">
                        <h3>ğŸ› ï¸ reæ¨¡å—çš„ä¸»è¦å‡½æ•°</h3>
                        <p>Pythonçš„reæ¨¡å—æä¾›äº†å¤šä¸ªå‡½æ•°æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>ğŸ’» reæ¨¡å—å‡½æ•°ç¤ºä¾‹</span>
                                <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                            </div>
                            <pre><code class="language-python">import re

text = "Pythonæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚æˆ‘å–œæ¬¢Pythonã€‚Pythonå¾ˆå¼ºå¤§ã€‚"

print("=== re.search() - æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é… ===")
match = re.search(r"Python", text)
if match:
    print("æ‰¾åˆ°:", match.group())
    print("ä½ç½®:", match.start(), "-", match.end())

print("\n=== re.findall() - æŸ¥æ‰¾æ‰€æœ‰åŒ¹é… ===")
matches = re.findall(r"Python", text)
print("æ‰€æœ‰åŒ¹é…:", matches)
print("åŒ¹é…æ¬¡æ•°:", len(matches))

print("\n=== re.finditer() - è¿”å›è¿­ä»£å™¨ ===")
for match in re.finditer(r"Python", text):
    print(f"åŒ¹é…: {match.group()}, ä½ç½®: {match.start()}-{match.end()}")

print("\n=== re.match() - ä»å¼€å¤´åŒ¹é… ===")
text2 = "Pythonæ˜¯æˆ‘æœ€å–œæ¬¢çš„è¯­è¨€"
match1 = re.match(r"Python", text2)  # æˆåŠŸ
match2 = re.match(r"Java", text2)    # å¤±è´¥
print("ä»å¼€å¤´åŒ¹é…Python:", match1.group() if match1 else "æ— åŒ¹é…")
print("ä»å¼€å¤´åŒ¹é…Java:", match2.group() if match2 else "æ— åŒ¹é…")

print("\n=== re.sub() - æ›¿æ¢ ===")
# ç®€å•æ›¿æ¢
new_text = re.sub(r"Python", "Java", text)
print("æ›¿æ¢å:", new_text)

# åªæ›¿æ¢ç¬¬ä¸€ä¸ª
new_text2 = re.sub(r"Python", "Java", text, count=1)
print("åªæ›¿æ¢ç¬¬ä¸€ä¸ª:", new_text2)

# ä½¿ç”¨å‡½æ•°æ›¿æ¢
def upper_replace(match):
    return match.group().upper()

new_text3 = re.sub(r"Python", upper_replace, text)
print("è½¬å¤§å†™:", new_text3)

print("\n=== re.split() - åˆ†å‰² ===")
data = "apple,banana;orange:grape"
# æŒ‰å¤šç§åˆ†éš”ç¬¦åˆ†å‰²
parts = re.split(r"[,;:]", data)
print("åˆ†å‰²ç»“æœ:", parts)

# åˆ†å‰²æ—¶ä¿ç•™åˆ†éš”ç¬¦
parts2 = re.split(r"([,;:])", data)
print("ä¿ç•™åˆ†éš”ç¬¦:", parts2)

print("\n=== ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ ===")
# é¢„ç¼–è¯‘å¯ä»¥æé«˜æ€§èƒ½
pattern = re.compile(r"\d+")
numbers = "å¹´é¾„25ï¼Œèº«é«˜180ï¼Œä½“é‡70"
matches = pattern.findall(numbers)
print("æå–çš„æ•°å­—:", matches)</code></pre>
                        </div>
                    </section>

                    <!-- çŸ¥è¯†ç‚¹5ï¼šå®ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ -->
                    <section class="mb-4">
                        <h3>ğŸ“‹ å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼</h3>
                        <p>ä¸€äº›åœ¨å®é™…é¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>ğŸ’» å®ç”¨æ¨¡å¼ç¤ºä¾‹</span>
                                <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                            </div>
                            <pre><code class="language-python">import re

# å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
patterns = {
    'email': r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$',
    'phone': r'^1[3-9]\d{9}$',
    'id_card': r'^\d{17}[\dXx]$',
    'url': r'https?://[^\s]+',
    'ip_address': r'^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$',
    'date': r'^\d{4}-\d{2}-\d{2}$',
    'time': r'^([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$',
    'chinese': r'[\u4e00-\u9fff]+',
    'password': r'^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$'
}

def validate_input(pattern_name, test_string):
    """éªŒè¯è¾“å…¥æ˜¯å¦ç¬¦åˆæ¨¡å¼"""
    pattern = patterns.get(pattern_name)
    if not pattern:
        return False, "æœªçŸ¥æ¨¡å¼"
    
    match = re.match(pattern, test_string)
    return bool(match), "æœ‰æ•ˆ" if match else "æ— æ•ˆ"

# æµ‹è¯•æ•°æ®
test_data = {
    'email': ['user@example.com', 'invalid-email', 'test@gmail.com'],
    'phone': ['13812345678', '1234567890', '15987654321'],
    'url': ['https://www.example.com', 'http://test.org', 'not-a-url'],
    'date': ['2024-03-15', '2024/03/15', '2024-12-31'],
    'chinese': ['ä½ å¥½ä¸–ç•Œ', 'Hello World', 'æµ‹è¯•123'],
}

print("=== è¾“å…¥éªŒè¯æµ‹è¯• ===")
for pattern_name, test_list in test_data.items():
    print(f"\n{pattern_name.upper()} éªŒè¯:")
    for test_str in test_list:
        is_valid, msg = validate_input(pattern_name, test_str)
        print(f"  '{test_str}' â†’ {msg}")

print("\n=== æ–‡æœ¬æå–ç¤ºä¾‹ ===")
# ä»å¤æ‚æ–‡æœ¬ä¸­æå–ä¿¡æ¯
sample_text = """
è”ç³»æ–¹å¼ï¼š
é‚®ç®±ï¼šzhang@example.com, li@test.org
ç”µè¯ï¼š13812345678, 15987654321
ç½‘ç«™ï¼šhttps://www.example.com
æ—¥æœŸï¼š2024-03-15
IPåœ°å€ï¼š192.168.1.1
"""

print("æå–çš„é‚®ç®±:")
emails = re.findall(patterns['email'], sample_text)
for email in emails:
    print(f"  {email}")

print("\næå–çš„ç”µè¯:")
phones = re.findall(patterns['phone'], sample_text)
for phone in phones:
    print(f"  {phone}")

print("\næå–çš„ç½‘å€:")
urls = re.findall(patterns['url'], sample_text)
for url in urls:
    print(f"  {url}")

print("\næå–çš„ä¸­æ–‡:")
chinese_text = re.findall(patterns['chinese'], sample_text)
for text in chinese_text:
    print(f"  {text}")

print("\n=== å¯†ç å¼ºåº¦æ£€æŸ¥ ===")
passwords = ['123456', 'Password123', 'weak', 'StrongPass1', 'Abc123']
for pwd in passwords:
    is_valid, msg = validate_input('password', pwd)
    strength = "å¼º" if is_valid else "å¼±"
    print(f"å¯†ç : {pwd:12} â†’ å¼ºåº¦: {strength}")

print("\n=== é«˜çº§æ–‡æœ¬å¤„ç† ===")
# æå–å¹¶æ ¼å¼åŒ–ç”µè¯å·ç 
phone_text = "è”ç³»ç”µè¯ï¼š138-1234-5678 æˆ– 13812345678 æˆ– 138 1234 5678"
# åŒ¹é…å„ç§æ ¼å¼çš„ç”µè¯å·ç 
phone_pattern = r'1[3-9]\d[\s-]?\d{4}[\s-]?\d{4}'
raw_phones = re.findall(phone_pattern, phone_text)
print("åŸå§‹ç”µè¯å·ç :", raw_phones)

# æ ‡å‡†åŒ–ç”µè¯å·ç æ ¼å¼
def normalize_phone(match):
    # ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦
    digits = re.sub(r'\D', '', match.group())
    # æ ¼å¼åŒ–ä¸º xxx-xxxx-xxxx
    return f"{digits[:3]}-{digits[3:7]}-{digits[7:]}"

normalized = re.sub(phone_pattern, normalize_phone, phone_text)
print("æ ‡å‡†åŒ–å:", normalized)</code></pre>
                        </div>
                    </section>

                    <!-- å®è·µç»ƒä¹  -->
                    <section class="mb-4">
                        <h3>ğŸ’ª å®è·µç»ƒä¹ </h3>
                        <div class="card">
                            <div class="card-header">
                                <h6>ç»ƒä¹ 1ï¼šæ—¥å¿—åˆ†æå™¨</h6>
                            </div>
                            <div class="card-body">
                                <p>åˆ›å»ºä¸€ä¸ªç®€å•çš„æ—¥å¿—åˆ†æå·¥å…·ï¼š</p>
                                
                                <div class="code-example">
                                    <div class="code-header">
                                        <span>ğŸ’» ç»ƒä¹ ä»£ç </span>
                                        <button class="btn btn-sm btn-primary run-code">è¿è¡Œä»£ç </button>
                                    </div>
                                    <pre><code class="language-python">import re
from collections import Counter

# æ¨¡æ‹Ÿæ—¥å¿—æ•°æ®
log_data = """
2024-03-15 10:30:15 INFO 192.168.1.100 GET /api/users 200 0.045s
2024-03-15 10:30:16 ERROR 192.168.1.101 POST /api/login 401 0.120s
2024-03-15 10:30:17 INFO 192.168.1.102 GET /api/products 200 0.032s
2024-03-15 10:30:18 WARNING 192.168.1.100 GET /api/users 404 0.015s
2024-03-15 10:30:19 ERROR 192.168.1.103 POST /api/orders 500 0.890s
2024-03-15 10:30:20 INFO 192.168.1.101 GET /api/dashboard 200 0.067s
2024-03-15 10:30:21 ERROR 192.168.1.102 DELETE /api/users/123 403 0.023s
"""

class LogAnalyzer:
    def __init__(self):
        # æ—¥å¿—æ ¼å¼çš„æ­£åˆ™è¡¨è¾¾å¼
        self.log_pattern = r'(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}) (\w+) (\d+\.\d+\.\d+\.\d+) (\w+) ([^\s]+) (\d+) ([\d.]+)s'
        
    def parse_log_line(self, line):
        """è§£æå•è¡Œæ—¥å¿—"""
        match = re.match(self.log_pattern, line.strip())
        if match:
            return {
                'date': match.group(1),
                'time': match.group(2),
                'level': match.group(3),
                'ip': match.group(4),
                'method': match.group(5),
                'path': match.group(6),
                'status': int(match.group(7)),
                'response_time': float(match.group(8))
            }
        return None
    
    def analyze_logs(self, log_text):
        """åˆ†ææ—¥å¿—æ–‡æœ¬"""
        lines = log_text.strip().split('\n')
        parsed_logs = []
        
        for line in lines:
            parsed = self.parse_log_line(line)
            if parsed:
                parsed_logs.append(parsed)
        
        return self.generate_report(parsed_logs)
    
    def generate_report(self, logs):
        """ç”Ÿæˆåˆ†ææŠ¥å‘Š"""
        if not logs:
            return "æ²¡æœ‰æœ‰æ•ˆçš„æ—¥å¿—æ•°æ®"
        
        # ç»Ÿè®¡å„ç§æŒ‡æ ‡
        levels = [log['level'] for log in logs]
        ips = [log['ip'] for log in logs]
        methods = [log['method'] for log in logs]
        status_codes = [log['status'] for log in logs]
        response_times = [log['response_time'] for log in logs]
        
        level_count = Counter(levels)
        ip_count = Counter(ips)
        method_count = Counter(methods)
        status_count = Counter(status_codes)
        
        # è®¡ç®—å“åº”æ—¶é—´ç»Ÿè®¡
        avg_response_time = sum(response_times) / len(response_times)
        max_response_time = max(response_times)
        min_response_time = min(response_times)
        
        # ç”ŸæˆæŠ¥å‘Š
        report = f"""
=== æ—¥å¿—åˆ†ææŠ¥å‘Š ===
æ€»æ—¥å¿—æ¡æ•°: {len(logs)}

=== æ—¥å¿—çº§åˆ«åˆ†å¸ƒ ===
"""
        for level, count in level_count.most_common():
            percentage = (count / len(logs)) * 100
            report += f"{level:8}: {count:3} æ¡ ({percentage:5.1f}%)\n"
        
        report += f"""
=== IPåœ°å€è®¿é—®ç»Ÿè®¡ ===
"""
        for ip, count in ip_count.most_common():
            report += f"{ip:15}: {count} æ¬¡è®¿é—®\n"
        
        report += f"""
=== HTTPæ–¹æ³•ç»Ÿè®¡ ===
"""
        for method, count in method_count.most_common():
            report += f"{method:6}: {count} æ¬¡\n"
        
        report += f"""
=== çŠ¶æ€ç ç»Ÿè®¡ ===
"""
        for status, count in status_count.most_common():
            status_name = self.get_status_name(status)
            report += f"{status} ({status_name:12}): {count} æ¬¡\n"
        
        report += f"""
=== å“åº”æ—¶é—´ç»Ÿè®¡ ===
å¹³å‡å“åº”æ—¶é—´: {avg_response_time:.3f}s
æœ€é•¿å“åº”æ—¶é—´: {max_response_time:.3f}s
æœ€çŸ­å“åº”æ—¶é—´: {min_response_time:.3f}s

=== é”™è¯¯åˆ†æ ===
"""
        error_logs = [log for log in logs if log['level'] == 'ERROR']
        if error_logs:
            report += f"é”™è¯¯æ€»æ•°: {len(error_logs)}\n"
            report += "é”™è¯¯è¯¦æƒ…:\n"
            for log in error_logs:
                report += f"  {log['time']} {log['ip']} {log['method']} {log['path']} â†’ {log['status']}\n"
        else:
            report += "æ²¡æœ‰é”™è¯¯æ—¥å¿—\n"
        
        return report
    
    def get_status_name(self, status_code):
        """è·å–çŠ¶æ€ç åç§°"""
        status_names = {
            200: "æˆåŠŸ",
            401: "æœªæˆæƒ", 
            403: "ç¦æ­¢è®¿é—®",
            404: "æœªæ‰¾åˆ°",
            500: "æœåŠ¡å™¨é”™è¯¯"
        }
        return status_names.get(status_code, "å…¶ä»–")
    
    def find_suspicious_activity(self, logs):
        """æŸ¥æ‰¾å¯ç–‘æ´»åŠ¨"""
        print("\n=== å¯ç–‘æ´»åŠ¨æ£€æµ‹ ===")
        
        # æŸ¥æ‰¾é¢‘ç¹è®¿é—®çš„IP
        ip_count = Counter(log['ip'] for log in logs)
        for ip, count in ip_count.most_common(3):
            if count >= 3:
                print(f"é«˜é¢‘è®¿é—®IP: {ip} ({count}æ¬¡)")
        
        # æŸ¥æ‰¾å¤±è´¥çš„ç™»å½•å°è¯•
        login_failures = [log for log in logs if 'login' in log['path'] and log['status'] == 401]
        if login_failures:
            print(f"ç™»å½•å¤±è´¥å°è¯•: {len(login_failures)}æ¬¡")
            for log in login_failures:
                print(f"  {log['time']} {log['ip']}")
        
        # æŸ¥æ‰¾æ…¢è¯·æ±‚
        slow_requests = [log for log in logs if log['response_time'] > 0.5]
        if slow_requests:
            print(f"æ…¢è¯·æ±‚ (>0.5s): {len(slow_requests)}ä¸ª")
            for log in slow_requests:
                print(f"  {log['path']} {log['response_time']}s")

# ä½¿ç”¨æ—¥å¿—åˆ†æå™¨
analyzer = LogAnalyzer()
report = analyzer.analyze_logs(log_data)
print(report)

# è§£ææ—¥å¿—ä»¥ä¾¿è¿›ä¸€æ­¥åˆ†æ
lines = log_data.strip().split('\n')
parsed_logs = [analyzer.parse_log_line(line) for line in lines if analyzer.parse_log_line(line)]

# å¯ç–‘æ´»åŠ¨æ£€æµ‹
analyzer.find_suspicious_activity(parsed_logs)

print("\n=== é«˜çº§æœç´¢ç¤ºä¾‹ ===")
# æŸ¥æ‰¾ç‰¹å®šæ¨¡å¼
error_pattern = r'ERROR.*(\d+\.\d+\.\d+\.\d+).*(\d{3})'
errors = re.findall(error_pattern, log_data)
print("ERRORæ—¥å¿—ä¸­çš„IPå’ŒçŠ¶æ€ç :", errors)

# æå–APIç«¯ç‚¹
api_pattern = r'GET|POST|PUT|DELETE)\s+(/api/[^\s]+)'
apis = re.findall(api_pattern, log_data)
api_count = Counter(apis)
print("\nAPIç«¯ç‚¹è®¿é—®ç»Ÿè®¡:")
for api, count in api_count.most_common():
    print(f"  {api}: {count}æ¬¡")</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- ç« èŠ‚æ€»ç»“ -->
                    <section class="mb-4">
                        <div class="card bg-light">
                            <div class="card-header">
                                <h5>ğŸ“‹ æœ¬ç« æ€»ç»“</h5>
                            </div>
                            <div class="card-body">
                                <ul>
                                    <li><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼šæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¼ºå¤§çš„æ–‡æœ¬æ¨¡å¼åŒ¹é…å·¥å…·</li>
                                    <li><strong>å…ƒå­—ç¬¦</strong>ï¼š. ^ $ * + ? \d \w \s ç­‰ç‰¹æ®Šå­—ç¬¦</li>
                                    <li><strong>é‡è¯</strong>ï¼š{n} {n,} {n,m} æ§åˆ¶é‡å¤æ¬¡æ•°</li>
                                    <li><strong>åˆ†ç»„</strong>ï¼š() ç”¨äºåˆ†ç»„ï¼Œ| ç”¨äºé€‰æ‹©</li>
                                    <li><strong>reæ¨¡å—</strong>ï¼šsearch, findall, match, sub, splitç­‰å‡½æ•°</li>
                                    <li><strong>å®ç”¨æ¨¡å¼</strong>ï¼šé‚®ç®±ã€ç”µè¯ã€URLç­‰å¸¸è§éªŒè¯æ¨¡å¼</li>
                                    <li>æ­£åˆ™è¡¨è¾¾å¼å¼ºå¤§ä½†å¤æ‚ï¼Œéœ€è¦å¤šç»ƒä¹ æ‰èƒ½ç†Ÿç»ƒæŒæ¡</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- å¯¼èˆªæŒ‰é’® -->
                    <div class="d-flex justify-content-between mb-4">
                        <a href="chapter9.html" class="btn btn-outline-primary">â† ä¸Šä¸€ç« ï¼šå­—ç¬¦ä¸²å¤„ç†</a>
                        <a href="../index.html" class="btn btn-success">ğŸ‰ è¯¾ç¨‹å®Œæˆï¼è¿”å›é¦–é¡µ</a>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥å¿…è¦çš„JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script src="../assets/js/tutorial-interactive.js"></script>
</body>
</html>
